<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Data Storage</title>
</head>
<body>
    <!-- Your application content -->

    <div id="userDataDiv">
        <userdata>
            <userprofile>
                <user>User not found</user>
                <userid></userid>
            </userprofile>
            <crawler></crawler>
        </userdata>
    </div>

    <script>
        let userDataDiv = document.getElementById('userDataDiv');

        // Function to update user data
        function updateUserData(userName, userId) {
            const userProfile = userDataDiv.querySelector('userprofile');
            userProfile.querySelector('user').textContent = userName;
            userProfile.querySelector('userid').textContent = userId;
        }

        // Function to add crawled data
        function addCrawledData(sourceUrl, crawledUrls) {
            const crawler = userDataDiv.querySelector('crawler');

            // Create a new <webpage> element
            const webpageElement = document.createElement('webpage');

            // Create and append <sourceurl> element
            const sourceUrlElement = document.createElement('sourceurl');
            sourceUrlElement.textContent = sourceUrl;
            webpageElement.appendChild(sourceUrlElement);

            // Create and append <crawledurls> element
            const crawledUrlsElement = document.createElement('crawledurls');
            crawledUrls.forEach(url => {
                const urlElement = document.createElement('url');
                urlElement.textContent = url;
                crawledUrlsElement.appendChild(urlElement);
            });
            webpageElement.appendChild(crawledUrlsElement);

            // Create and append <type>, <status>, and <lastupdated> elements
            const typeElement = document.createElement('type');
            typeElement.textContent = 'connections';
            webpageElement.appendChild(typeElement);

            const statusElement = document.createElement('status');
            statusElement.textContent = 'processed';
            webpageElement.appendChild(statusElement);

            const lastUpdatedElement = document.createElement('lastupdated');
            lastUpdatedElement.textContent = new Date().toISOString();
            webpageElement.appendChild(lastUpdatedElement);

            // Append the new webpage element to the crawler section
            crawler.appendChild(webpageElement);

            // Log the updated innerHTML for demonstration
            console.log(userDataDiv.innerHTML);
        }

        // Example usage
        updateUserData('John Doe', '12345');
        addCrawledData('https://www.linkedin.com/mynetwork/invite-connect/connections/', [
            'https://www.linkedin.com/company/fluenceenergy/',
            'https://www.linkedin.com/company/fluenceenergy/jobs/',
            'https://www.linkedin.com/company/fluenceenergy/connections/'
        ]);
    </script>
</body>
</html>